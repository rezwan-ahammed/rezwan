<!DOCTYPE html>
<html>
<head>
<title>Image Description with Gemini</title>
<style>
  body {
    font-family: sans-serif;
  }
  #image-container {
    margin-bottom: 20px;
  }
  img {
    max-width: 500px;
    height: auto;
  }
</style>
</head>
<body>

<h1>Image Description1</h1>

<div id="image-container">
  <img id="selected-image" src="" alt="Selected Image">
</div>

<input type="file" id="image-input" accept="image/*">
<button id="describe-button">Describe Image</button>

<div id="description"></div>

<script>
  const imageInput = document.getElementById('image-input');
  const selectedImage = document.getElementById('selected-image');
  const describeButton = document.getElementById('describe-button');
  const descriptionDiv = document.getElementById('description');

  // Replace with your actual API key
  const apiKey = 'AIzaSyBmJtxnS2fsnSbFbscPMRhw50mMoLK6n_g'; 

  imageInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = (e) => {
      selectedImage.src = e.target.result;
    }
    reader.readAsDataURL(file);
  });

  describeButton.addEventListener('click', async () => {
    if (!selectedImage.src) {
      alert('Please select an image first.');
      return;
    }

    const imageBase64 = selectedImage.src.split(',')[1]; // Extract Base64 data

    descriptionDiv.textContent = 'Generating description...';

    try {
      const response = await fetch(
        'https://generativelanguage.googleapis.com/v1beta2/models/gemini-1.5-flash-6b:generateContent',
        {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            prompt: {
              text: 'Describe the content in the image in 3 lines.'
            },
            parts: [
              {
                image: {
                  mimeType: 'image/jpeg', // Adjust if needed
                  data: imageBase64
                }
              }
            ]
          })
        }
      );

      const data = await response.json();
      const description = data.candidates[0].text;
      descriptionDiv.textContent = description;

    } catch (error) {
      console.error('Error:', error);
      descriptionDiv.textContent = 'An error occurred.';
    }
  });
</script>

</body>
</html>
